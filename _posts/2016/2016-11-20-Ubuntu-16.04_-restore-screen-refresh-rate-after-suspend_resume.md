---
layout:       post
title:        >
    Ubuntu 16.04: restore screen refresh rate after suspend/resume
site:         Ask Ubuntu
stack_url:    https://askubuntu.com/q/851394
type:         Answer
tags:         16.04 suspend display-resolution wakeup
created_date: 2016-11-20 02:42:48
edit_date:    2017-11-29 23:29:17
votes:        "0 "
favorites:    
views:        "1,205 "
accepted:     
uploaded:     2023-12-31 10:24:11
git_md_url:   https://github.com/pippim/pippim.github.io/blob/main/_posts/2016/2016-11-20-Ubuntu-16.04_-restore-screen-refresh-rate-after-suspend_resume.md
toc:          false
navigation:   false
clipboard:    false
---

It can get confusing with the many different ways you can put the computer to sleep with acpi, gnome's gsettings, pm-utils, power management (or something like that) and systemd. 

In your case you need to create a script in `/lib/systemd/system-sleep` that looks like this:



``` sh
#!/bin/sh

case $1/$2 in
  pre/*)
    echo "Going to $2..."
    # Place your pre suspend commands here, or `exit 0` if no pre suspend action required
    exit 0
    ;;
  post/*)
    echo "Waking up from $2..."
    # Place your post suspend (resume) commands here, or `exit 0` if no post suspend action required
    sleep 2
    xrandr -r 60
    date > /tmp/resume.txt
    ;;
esac
```

To ensure the script is created with the right permissions, copy and existing script and then edit it:

``` bash
cd /lib/systemd/system-sleep
sudo cp wpasupplicant tv_refresh
gksu gedit tv_refresh
```

The `sleep 2` pause may be unnecessary for you but for my setup it was necessary restoring sound from laptop back to HDMI TV.

The `echo` lines are optional but are handy because they show up in `/var/log/syslog`.
